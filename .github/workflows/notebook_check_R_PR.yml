name: Execute modified R notebooks on PR (NEW)

on:
  pull_request:
    paths:
      # R notebooks and scripts (only .ipynb and .R files in /R/ subdirectories)
      - '**/R/*.ipynb'
      - '**/R/*.R'
      # R dependencies and utilities (anywhere in repo)
      - '**.R'
      - 'renv.lock'
      # Configuration and workflow files
      - '.github/notebooks-config.json'
      - '.github/workflows/notebook-test-r-reusable.yml'
      - '.github/workflows/notebook_check_R_PR.yml'

jobs:
  test-changed-r-notebooks:
    uses: ./.github/workflows/notebook-test-r-reusable.yml
    with:
      notebook_selection: 'changed'
      base_sha: ${{ github.event.pull_request.base.sha }}
      head_sha: ${{ github.event.pull_request.head.sha }}