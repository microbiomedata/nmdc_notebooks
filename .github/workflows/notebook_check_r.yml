name: Execute R notebooks

on:
  push:
  pull_request:
  workflow_dispatch:
  # run once a week
  schedule:
    - cron: "0 0 * * 0"

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - id: checkout
      uses: actions/checkout@v3

    - id: r-setup
      name: Set up R
      uses: r-lib/actions/setup-r@v2

    - id: r-dependencies
      name: Install R dependencies
      uses: r-lib/actions/setup-renv@v2
      with:
        renv-config-path: renv.lock

    - id: execute-bioscales
      name: Execute bioscales notebook
      run: |
        jupyter nbconvert --execute --to notebook --inplace bioscales_biogeochemical_metadata/R/bioscales_metadata.ipynb